(function(e){function t(t,n){function r(){gn=ct.find(".slides");if(ht.settings.shuffle){var t=gn.children();gn.find(".slide").each(function(t){e(this).attr("data-index",t)});t=t.sort(function(){return.5-Math.random()});gn.empty().append(t)}gn.children().find("article").each(function(t,n){var r={},s=ht.settings.shuffle?parseInt(e(n).data("index")):t;r.properties={};gt.push(e(this));if(e(this).parent().data("image")){r.lazyImage=e(this).parent().data("image");r.lazyImageLoaded=false}for(var o=0;o<e(this).children().length;o++){var u=e(this).children()[o];if(e(u).hasClass("thumbnail")||e(u).is("a")&&e(u).children("img.thumbnail").length)r.thumbnail=e(u).clone();else r[e(u).attr("class")]=e(u)}if(!r.caption&&e(this).find(".caption").length)r.caption=e(this).find(".caption");if(!r.html&&e(this).find(".html").length)r.html=e(this).find(".html");if(ht.settings.xmlSource){r.properties=mt[s].properties;mt[t]=r}else{for(o=0;o<kn.length;o++){u=kn[o];var a;if(ht.settings.slideProperties)if(ht.settings.slideProperties[s])a=ht.settings.slideProperties[s][u];r.properties[u]||(r.properties[u]=a==undefined?ht.settings[u]:a)}mt.push(r)}});if(xn){gn.find("img.thumbnail").parent("a").css("display","none");gn.find("img.thumbnail").css("display","none");window.onload=function(){gn.find("img.thumbnail").parent("a").remove();gn.find("img.thumbnail").remove()}}else{gn.find("img.thumbnail").parent("a").remove();gn.find("img.thumbnail").remove()}yt=mt.length;s()}function s(){ct.addClass(ht.settings.skin).css({width:ht.settings.width,height:ht.settings.height}).focus(function(){Nn=true;ct.addClass("focus")}).blur(function(){Nn=false;ct.hasClass("focus")&&ct.removeClass("focus")});vn=e('<div class="slider-main"></div>').appendTo(ct);if(e.browser.mozilla)ct.addClass("mozilla");else if(e.browser.webkit||e.browser.chrome||e.browser.safari)ct.addClass("webkit");else if(e.browser.opera)ct.addClass("opera");else if(e.browser.msie)if(parseInt(e.browser.version)==6)ct.addClass("ie6");else if(parseInt(e.browser.version)==7)ct.addClass("ie7");else if(parseInt(e.browser.version)==8)ct.addClass("ie8");else parseInt(e.browser.version)==9&&ct.addClass("ie9");mn=e('<div class="slide-wrapper"></div>').append(gn).appendTo(vn).hover(function(){St=true;if(ht.settings.timerAnimation&&ht.settings.timerToggle&&Ot!="stopped"&&!Et){var e=ct.find(".timer-animation");xn?e.css("filter",""):e.stop().animate({opacity:1},ht.settings.timerFadeDuration)}if(xt&&ht.settings.lightboxIconToggle){e=mn.find(".lightbox-icon");xn?e.css("filter",""):e.stop().animate({opacity:1},ht.settings.lightboxIconFadeDuration)}ht.settings.pauseSlideshowOnHover&&!kt&&F();Nt&&ht.settings.captionToggle&&_();if(ht.settings.slideArrows&&ht.settings.slideArrowsToggle)xn?ct.find(".slide-arrows a").stop().show():ct.find(".slide-arrows a").stop().animate({opacity:1},ht.settings.slideArrowsShowDuration);if(ht.settings.slideshowControls&&ht.settings.slideshowControlsToggle)xn?ct.find(".slideshow-controls").stop().show():ct.find(".slideshow-controls").stop().animate({opacity:1},ht.settings.slideshowControlsShowDuration);ht.settings.autoToggle&&K()},function(){St=false;ht.settings.autoToggle&&Q();if(ht.settings.timerAnimation&&ht.settings.timerToggle&&Ot!="stopped"&&!Et){var e=ct.find(".timer-animation");xn?e.css("opacity",1):e.stop().animate({opacity:1},ht.settings.timerFadeDuration)}if(xt&&ht.settings.lightboxIconToggle){e=mn.find(".lightbox-icon");xn?e.css("opacity",0):e.stop().animate({opacity:0},ht.settings.lightboxIconFadeDuration)}ht.settings.pauseSlideshowOnHover&&!Tt&&!Ct&&!kt&&I();Nt&&ht.settings.captionToggle&&D();if(ht.settings.slideArrows&&ht.settings.slideArrowsToggle)xn?ct.find(".slide-arrows a").stop().hide():ct.find(".slide-arrows a").stop().animate({opacity:0},ht.settings.slideArrowsHideDuration);if(ht.settings.slideshowControls&&ht.settings.slideshowControlsToggle)xn?ct.find(".slideshow-controls").stop().hide():ct.find(".slideshow-controls").stop().animate({opacity:0},ht.settings.slideshowControlsHideDuration)});ht.settings.effectType=="swipe"&&e('<div class="swipeable-container"></div>').appendTo(mn).append(gn);gn.find(".slide").each(function(t){var n=e(this),r=n.find("img.image");n=n.find(".caption");var s=mt[t],o=s.properties;if(r.length){r.data("index",t);s.imagePath=r.attr("src")}if(n.length){t=parseFloat(o.captionBackgroundOpacity);r=o.captionBackgroundColor;o=e('<div class="caption-container"></div>').appendTo(n.parent());o=e('<div class="wrapper"></div>').appendTo(o);e('<div class="background"></div>').css({opacity:t,"background-color":r}).appendTo(o);n.appendTo(o)}});gn.find(".html video.video").each(function(){var t=e(this),n=t.parent();if(Tn&&t.is("video")){var r=t[0].outerHTML;t.remove();n.html(r);t=n.find("video");t[0].load()}t.hasClass("video-js")&&VideoJS(t.attr("id"),t.data("video"))});gn.find(".html .jw-player").length&&gn.find(".html .jw-player").each(function(){jwPlayerArgs={};jwPlayerModes=[];flashModeSources=[];html5ModeSources=[];sources=[];video.find(".source").each(function(){var t=e(this);if(t.hasClass("flash"))flashModeSources.push(e(this).data());else t.hasClass("html5")?html5ModeSources.push(e(this).data()):sources.push(e(this).data())});if(flashModeSources.length){var t={type:"flash"};t.config={};t.src=ht.settings.jwPlayerPath+"/player.swf";if(flashModeSources.length==1)t.config.file=flashModeSources[0].file;else t.config.levels=flashModeSources;if(video.data("provider"))t.config.provider=video.data("provider");if(video.data("streamer"))t.config.streamer=video.data("streamer");jwPlayerModes.push(t)}if(html5ModeSources.length){t={type:"html5"};t.config={};if(html5ModeSources.length==1)t.config.file=html5ModeSources[0].file;else t.config.levels=html5ModeSources;jwPlayerModes.push(t)}if(sources.length){jwPlayerArgs.flashplayer=ht.settings.jwPlayerPath+"/player.swf";if(sources.length==1)jwPlayerArgs.file=sources[0].file;else jwPlayerArgs.levels=sources;if(video.data("provider"))jwPlayerArgs.provider=video.data("provider");if(video.data("streamer"))jwPlayerArgs.streamer=video.data("streamer")}if(video.data("width"))jwPlayerArgs.width=video.data("width");if(video.data("height"))jwPlayerArgs.height=video.data("height");if(video.data("image"))jwPlayerArgs.image=video.data("image");if(video.data("skin"))jwPlayerArgs.skin=video.data("skin");if(jwPlayerModes.length)jwPlayerArgs.modes=jwPlayerModes;jwplayer(video.attr("id")).setup(jwPlayerArgs)});gn.find(".html video.sublime-video").length&&window.sublimevideo&&sublimevideo.ready(function(){gn.find(".html video.sublime-video").each(function(){sublimevideo.prepare(e(this).attr("id"))})});bt=ht.settings.slideStart;var t=window.location.hash;if(t){t=t.substring(1);var n=t.split("-");n=parseInt(n.pop());t=t.replace("-"+n,"");if(ct.attr("id")==t&&n>=0&&n<=yt-1)bt=n}ht.settings.slideArrows&&f();ht.settings.slideButtons&&c();ht.settings.shadow&&v();if(ht.settings.thumbnailType=="scroller"||ht.settings.thumbnailType=="tooltipAndScroller")U();ht.settings.slideshowControls&&l();ht.settings.keyboardNavigation&&h();if(ht.settings.fullscreenControls&&!(Tn||e.browser.msie))p();ht.settings.lightbox&&ct.find("a[rel^='slider-lightbox']").prettyPhoto({social_tools:"",deeplinking:false,overlay_gallery:false,theme:ht.settings.lightboxTheme,opacity:ht.settings.lightboxOpacity,openLightbox:function(){if(!Tt){Tt=true;ct.blur();kt||F()}},callback:function(){if(Tt){Tt=false;ct.focus();kt||I()}}});if((ht.settings.thumbnailType=="scroller"||ht.settings.thumbnailType=="tooltipAndScroller")&&(ht.settings.thumbnailMouseScroll||ht.settings.thumbnailTooltip||ht.settings.thumbnailScrollbar)||ht.settings.autoToggle)e(document).bind("mousemove",function(e){nn=e.pageX;rn=e.pageY;on=nn+rn});hn="none";o();y(bt);e(window).resize(o)}function o(){var t=0,n=0;ht.settings.aspectRatio!=-1&&ct.css("height",ct.width()/ht.settings.aspectRatio);if(ht.settings.thumbnailType=="scroller"||ht.settings.thumbnailType=="tooltipAndScroller")if(ht.settings.fullscreenThumbnailScrollerOverlay&&Cn=="on")if(ht.settings.thumbnailOrientation=="horizontal")vn.css("height",ct.height());else ht.settings.thumbnailOrientation=="vertical"&&vn.css("width",ct.width());else if(!ht.settings.thumbnailScrollerOverlay)if(ht.settings.thumbnailOrientation=="horizontal")vn.css("height",ct.height()-jt.outerHeight(true));else ht.settings.thumbnailOrientation=="vertical"&&vn.css("width",ct.width()-jt.outerWidth(true));if(ht.settings.shadow){var r=vn.find(".shadow");if(Cn=="on"&&!ht.settings.fullscreenShadow||vn.width()<400)r.css("display","none");else{r.css("display","block");var s=r.find(".shadow-middle"),o=r.find(".shadow-left").width()+r.find(".shadow-right").width(),a=parseInt(r.css("height"))+parseInt(r.css("margin-top"));r.css("width",vn.width());s.css("width",r.width()-o);t=a>t?a:t}}if(ht.settings.slideButtons){r=vn.find(".slide-buttons");if(!r.data("width")){r.data("width",parseInt(r.css("width")));r.data("height",parseInt(r.css("height")))}a=r.find("buttons-middle");s=a.find("buttons-inner");r.css("width",parseInt(r.data("width")));r.css("height",parseInt(r.data("height")));o=parseInt(r.css("height"))+parseInt(r.css("margin-top"));r.css("left",0);if(ht.settings.slideButtonsCenter){a=(a.width()-s.width())/2;s.css("left",a)}if(ht.settings.slideButtonsContainerCenter){a=(vn.width()-r.width())/2;r.css("left",a)}if(Cn=="on"&&!ht.settings.fullscreenSlideButtons)r.css("display","none");else{r.css("display","block");t=o>t?o:t}}wn=t;t+=parseInt(mn.css("border-top-width"))+parseInt(mn.css("border-bottom-width"));n+=parseInt(mn.css("border-left-width"))+parseInt(mn.css("border-right-width"));mn.css({height:vn.height()-t,width:vn.width()-n});yn=mn.width();bn=mn.height();gn.find(".slide").each(function(t){var n=e(this),r=n.find("img.image"),s=mt[t].properties.alignType;if(r.length)if(r[0].complete||r[0].readyState=="complete")u(r,s);else{r.css("visibility","hidden");r.load(function(){r.css("visibility","");u(r,s)})}if(ht.settings.effectType=="swipe"){var o=pt!=-1?pt:bt;if(ht.settings.swipeOrientation=="horizontal"){gn.css("left",-o*(gn.width()+ht.settings.swipeSlideDistance));n.css("left",t*(gn.width()+ht.settings.swipeSlideDistance))}else if(ht.settings.swipeOrientation=="vertical"){gn.css("top",-o*(gn.height()+ht.settings.swipeSlideDistance));n.css("top",t*(gn.height()+ht.settings.swipeSlideDistance))}}});if((ht.settings.thumbnailType=="tooltipAndScroller"||ht.settings.thumbnailType=="scroller")&&ht.settings.scaleType!="proportionalFit"){z();tt();ht.settings.thumbnailMouseScroll&&G()}t={type:"doSliderLayout"};e.isFunction(ht.settings.doSliderLayout)&&ht.settings.doSliderLayout.call(this,t)}function u(e,t){if(!e.data("init")){e.data("init",true);e.data("width",e.width());e.data("height",e.height());e.data("state","loaded");ht.settings.allowScaleUp||e.css({maxWidth:e.data("width"),maxHeight:e.data("height")})}switch(ht.settings.scaleType){case"exactFit":e.css({width:"100%",height:"100%"});break;case"insideFit":e.width()/e.height()>=mn.width()/mn.height()?e.css({width:"100%",height:"auto"}):e.css({width:"auto",height:"100%"});break;case"outsideFit":e.width()/e.height()<=mn.width()/mn.height()?e.css({width:"100%",height:"auto"}):e.css({width:"auto",height:"100%"});break;case"proportionalFit":if(e.data("index")==pt&&(e[0].complete||e[0].readyState=="complete")){mn.css("width",yn);mn.css("height",bn);e.css({width:"100%",height:"auto"});mn.css("height",e.height());vn.css("height",mn.outerHeight(true)+wn);if(ht.settings.thumbnailType=="scroller"||ht.settings.thumbnailType=="tooltipAndScroller"){ht.settings.thumbnailOrientation=="horizontal"&&!ht.settings.thumbnailScrollerOverlay?ct.css("height",vn.height()+jt.outerHeight(true)):ct.css("height",vn.height());z();tt();ht.settings.thumbnailMouseScroll&&G()}else ct.css("height",vn.height());if(dt!=-1){var n=gt[dt].find("img.image"),r=mt[dt].properties.alignType;n.length&&a(n,r)}}}a(e,t)}function a(e,t){var n=e.width(),r=e.height();switch(t){case"leftTop":e.css({left:0,top:0});break;case"leftCenter":e.css({left:0,top:"50%","margin-top":-r*.5});break;case"leftBottom":e.css({left:0,bottom:0});break;case"centerTop":e.css({left:"50%",top:0,"margin-left":-n*.5});break;case"centerCenter":e.css({left:"50%",top:"50%","margin-left":-n*.5,"margin-top":-r*.5});break;case"centerBottom":e.css({left:"50%",bottom:0,"margin-left":-n*.5});break;case"rightTop":e.css({right:0,top:0});break;case"rightCenter":e.css({right:0,top:"50%","margin-top":-r*.5});break;case"rightBottom":e.css({right:0,bottom:0});break;case"default":e.css({left:"50%",top:"50%","margin-left":-n*.5,"margin-top":-r*.5})}}function f(){var t=e('<div class="slide-arrows"></div>').appendTo(mn),n=e('<a class="previous"></a>').appendTo(t).click(function(){hn="previousButton";w()});t=e('<a class="next"></a>').appendTo(t).click(function(){hn="nextButton";b()});if(ht.settings.slideArrowsToggle)if(xn){n.hide();t.hide()}else{n.css("opacity",0);t.css("opacity",0)}}function l(){var t=e('<div class="slideshow-controls"></div>').appendTo(mn),n=ht.settings.slideshow?"pause":"play";Ot=ht.settings.slideshow?"playing":"stopped";t.addClass(n).click(function(){if(Ot=="playing"||Ot=="paused")B();else Ot=="stopped"&&H()});if(ht.settings.slideshowControlsToggle)xn?t.hide():t.css("opacity",1)}function c(){var t=yt,n=e('<div class="slide-buttons"></div>').appendTo(vn);e('<div class="left"></div>').appendTo(n);var r=e('<div class="middle"></div>').appendTo(n);e('<div class="right"></div>').appendTo(n);r=e('<div class="buttons-inner"></div>').appendTo(r);for(var s=0;s<t;s++){var o=e('<a rel="'+s+'"></a>').appendTo(r);ht.settings.slideButtonsNumber&&e('<div class="number">'+(s+1)+"</div>").appendTo(o);o.hover(function(){var t=parseInt(e(this).attr("rel"));e(this).hasClass("select")||e(this).addClass("over");if(mt[t].properties.thumbnailType=="tooltip"||mt[t].properties.thumbnailType=="tooltipAndScroller")m(t)},function(){var t=parseInt(e(this).attr("rel"));e(this).hasClass("select")||e(this).removeClass("over");if(mt[t].properties.thumbnailType=="tooltip"||mt[t].properties.thumbnailType=="tooltipAndScroller")g()});o.click(function(){hn="button";y(parseInt(e(this).attr("rel")))})}if(ht.settings.slideButtonsToggle){xn?n.hide():n.css("opacity",1);ct.hover(function(){xn?n.show():n.stop().animate({opacity:1},ht.settings.slideButtonsShowDuration)},function(){xn?n.hide():n.stop().animate({opacity:1},ht.settings.slideButtonsHideDuration)})}}function h(){e(document).keydown(function(e){if(e.which==37&&(ht.settings.keyboardNavigationOnFocusOnly&&Nn||!ht.settings.keyboardNavigationOnFocusOnly))w();else if(e.which==39&&(ht.settings.keyboardNavigationOnFocusOnly&&Nn||!ht.settings.keyboardNavigationOnFocusOnly))b();else e.which==13&&Nn&&gt[pt].children("a").length&&gt[pt].children("a").not(".thumbnail")[0].click()})}function p(){var n=e('<div class="full-screen-controls"></div>').appendTo(mn);n.click(function(){if(Cn=="off")if(t.requestFullScreen)t.requestFullScreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else t.webkitRequestFullScreen&&t.webkitRequestFullScreen();else if(Cn=="on")if(document.cancelFullScreen)document.cancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else document.webkitCancelFullScreen&&document.webkitCancelFullScreen()});document.addEventListener("fullscreenchange",d);document.addEventListener("mozfullscreenchange",d);document.addEventListener("webkitfullscreenchange",d);if(ht.settings.fullscreenControlsToggle&&!St)n.css("opacity",1);else xn||n.css({opacity:1}).stop().animate({opacity:1},ht.settings.fullscreenIconHideDuration);ht.settings.fullscreenControlsToggle&&mn.hover(function(){xn?n.css("filter",""):n.stop().animate({opacity:1},ht.settings.fullscreenIconShowDuration)},function(){xn?n.css("opacity",1):n.stop().animate({opacity:1},ht.settings.fullscreenIconHideDuration)})}function d(){Cn=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen?"on":"off";if(Cn=="on"){ct.css({width:"100%",height:"100%"}).addClass("fullscreen");jt&&ht.settings.fullscreenThumbnailScrollerOverlay&&jt.addClass("overlay")}else{ct.css({width:ht.settings.width,height:ht.settings.height}).removeClass("fullscreen");jt&&ht.settings.fullscreenThumbnailScrollerOverlay&&jt.removeClass("overlay")}o()}function v(){var t=e('<div class="shadow"></div>').appendTo(vn);e('<div class="shadow-left"></div>').appendTo(t);e('<div class="shadow-middle"></div>').appendTo(t);e('<div class="shadow-right"></div>').appendTo(t)}function m(t){if(mt[t].thumbnail){var n=mt[t].thumbnail.is("a")?mt[t].thumbnail.find("img"):mt[t].thumbnail,r=n.attr("src"),s=n.attr("alt");n=e('<div class="thumbnail-wrapper"></div>').appendTo(ct.find(".buttons-inner"));var o=e('<div class="thumbnail"></div>').css({width:ht.settings.thumbnailWidth,height:ht.settings.thumbnailHeight}).appendTo(n);n.css({width:o.outerWidth(),height:o.outerHeight()});if(s){var u=e('<div class="caption"></div>').appendTo(o),a=e('<div class="background"></div>').appendTo(u);s=e('<div class="content">'+s+"</div>").appendTo(u);a=a.css("opacity");u.css("height",s.outerHeight(true));ht.settings.thumbnailCaptionPosition=="top"?u.css("top",0):u.css("bottom",0)}u=ct.find(".buttons-inner a").eq(t);t=u.position().left-(n.outerWidth(true)-u.width())/2;u=u.position().top-n.outerHeight(true);xn&&n.find("*").not(".background").css("filter","inherit");n.css({left:t,top:u-ht.settings.thumbnailSlideAmount,opacity:0});e("<img/>").load(function(){o.css("background-image","url("+r+")")}).attr("src",r);if(xn){n.animate({top:u,opacity:1},ht.settings.thumbnailSlideDuration,ht.settings.thumbnailSlideEasing);n.find(".caption .background").animate({opacity:a},ht.settings.thumbnailSlideDuration)}else n.animate({top:u,opacity:1},ht.settings.thumbnailSlideDuration,ht.settings.thumbnailSlideEasing)}}function g(){var e=ct.find(".buttons-inner .thumbnail-wrapper");if(e.length){var t=e.find(".background");xn&&t.animate({opacity:0},ht.settings.thumbnailSlideDuration);e.animate({top:e.position().top-ht.settings.thumbnailSlideAmount,opacity:0},ht.settings.thumbnailSlideDuration,ht.settings.thumbnailSlideEasing,function(){e.remove()})}}function y(t){if(t!=pt){if(Et)if(ht.settings.overrideTransition)switch(Sn){case"slide":gt[pt].stop(false,true);break;case"fade":gt[pt].stop(false,true);dt!=-1&&gt[dt].stop(false,true);break;case"slice":wt.find(".slice").each(function(){clearTimeout(e(this).data("delay"));e(this).stop().remove()});wt.remove();dt!=-1&&gt[dt].css({visibility:""});gt[pt].css("visibility","visible");M()}else if(ht.settings.effectType!="swipe")return;ht.settings.slideshow&&j();if(xt){xt=false;var n=mn.find(".lightbox-icon");xn?n.remove():n.stop().animate({opacity:0},ht.settings.lightboxIconFadeDuration,function(){n.remove()})}if(dn){dn.leaveVideo();Ct=false}Et=true;dt=pt;pt=t;if(dt!=-1){gt[dt].parent().removeClass("active");gt[dt].parent().addClass("transition")}gt[pt].parent().addClass("active");ht.settings.effectType=="swipe"?gn.find(".slide").addClass("transition"):gt[pt].parent().addClass("transition");if(pt!=vt)if(Nt&&ht.settings.effectType!="swipe"){Nt=false;D();pn&&clearTimeout(pn)}var r=mt[t],s=gt[t].find("img.image");if(r.lazyImage&&!r.lazyImageLoaded){var o=e('<img class="image"/>').attr("src",mt[t].lazyImage);s.attr("alt")&&o.attr("alt",s.attr("alt"));s.attr("title")&&o.attr("title",s.attr("title"));o.data("index",t);if(s.length){o.prependTo(s.parent());s.remove()}else o.prependTo(gt[t]);s=o;r.imagePath=s.attr("src");r.lazyImageLoaded=true}if(s.length&&(s.data("state")!="loaded"||ht.settings.scaleType=="proportionalFit")){var a=r.properties.alignType;if(ht.settings.effectType=="swipe"){s.css("visibility","hidden");if(s[0].complete||s[0].readyState=="complete"){s.css("visibility","");u(s,a)}else{S(gt[s.data("index")]);s.load(function(){s.css("visibility","");u(s,a);x(gt[s.data("index")])}).error(function(){x(gt[s.data("index")]);Et=false})}N()}else if(s[0].complete||s[0].readyState=="complete"){u(s,a);N()}else{S(mn);s.load(function(){u(s,a);x(mn);N()}).error(function(){x(mn);Et=false})}}else N();if(ht.settings.slideButtons){o=ct.find(".buttons-inner");o.find(".select").removeClass("select");o.find("a").eq(t).attr("class","select")}if(ht.settings.thumbnailType=="scroller"||ht.settings.thumbnailType=="tooltipAndScroller"){jt.find(".thumbnail.select").removeClass("select");jt.find(".thumbnail[data-index="+t+"]").removeClass("over").addClass("select");if(ht.settings.thumbnailSync){t=Math.floor(t/(Pt*Kt));t!=$t&&J(t)}}r={type:"slideOpen",index:pt,data:r};e.isFunction(ht.settings.slideOpen)&&ht.settings.slideOpen.call(this,r)}}function b(){y(pt==yt-1?0:pt+1)}function w(){y(pt==0?yt-1:pt-1)}function E(t){var n=[];if(!(yt<=1)){if(yt==2)if(t==0)n.push(1);else t==1&&n.push(0);else if(yt>=3)n.push(t==0?yt-1:t-1,t==yt-1?0:t+1);for(t=0;t<n.length;t++){var r=n[t],s=mt[r];if(s.lazyImage&&!s.lazyImageLoaded){var o=gt[r].find("img.image"),a=e('<img class="image"/>').attr("src",s.lazyImage),f=s.properties.alignType;o.attr("alt")&&a.attr("alt",o.attr("alt"));o.attr("title")&&a.attr("title",o.attr("title"));a.data("index",r);if(o.length){a.prependTo(o.parent());o.remove()}else a.prependTo(gt[r]);o=a;s.lazyImageLoaded=true;s.imagePath=o.attr("src");o[0].complete||o[0].readyState=="complete"?u(o,f):o.load(function(){u(o,f)})}}}}function S(t){if(!t.find(".preloader").length){var n=e('<div class="preloader"></div>').hide().appendTo(t),r=(t.outerWidth(true)-n.width())*.5;t=(t.outerHeight(true)-n.height())*.5;n.fadeIn(300);n.css({left:r,top:t})}}function x(e){e.find(".preloader").stop().remove()}function T(e){e.preventDefault()}function N(){var t=mt[pt].properties.effectType;if(!ht.settings.initialEffect&&cn){t="none";cn=false}if(ht.settings.effectType=="swipe")t="swipe";else if(t=="random")t=ft(["slice","slide","fade"]);Sn=t;var n={type:"transitionStart",index:pt,data:mt[pt]};e.isFunction(ht.settings.transitionStart)&&ht.settings.transitionStart.call(this,n);switch(t){case"none":dt!=-1&&gt[dt].css("visibility","");gt[pt].css("visibility","visible");M();break;case"fade":C();break;case"slide":k();break;case"swipe":L();break;case"slice":A();break;default:C()}}function C(){var t=mt[pt].properties,n=gt[pt],r,s=parseInt(t.fadeInDuration),o=t.fadeInEasing,u=parseInt(t.fadeOutDuration);t=t.fadeOutEasing;xn&&n.find("*").each(function(){e(this).hasClass(".caption-container")||e(this).parents(".caption-container").length==1||e(this).css("filter","inherit")});n.css({visibility:"visible",opacity:0}).animate({opacity:1},s,o,function(){n.css({opacity:""});xn&&n.find("*").each(function(){e(this).hasClass(".caption-container")||e(this).parents(".caption-container").length==1||e(this).css("filter","")});M()});if(dt!=-1){r=gt[dt];xn&&r.find("*").each(function(){e(this).hasClass(".caption-container")||e(this).parents(".caption-container").length==1||e(this).css("filter","inherit")});r.animate({opacity:0},u,t,function(){r.css({visibility:"",opacity:""});xn&&r.find("*").each(function(){e(this).hasClass(".caption-container")||e(this).parents(".caption-container").length==1||e(this).css("filter","")})})}}function k(){var e=mt[pt].properties,t=gt[pt],n,r=e.slideDirection,i=parseInt(e.slideDuration),s=e.slideEasing;e=e.slideLoop;if(dt!=-1)n=gt[dt];if(r=="random")r=ft(["autoHorizontal","autoVertical","rightToLeft","leftToRight","topToBottom","bottomToTop"]);t.css("visibility","visible");var o={},u,a;switch(r){case"autoHorizontal":u="left";a=pt==0&&dt==yt-1&&e?mn.width():pt==yt-1&&dt==0&&e?-mn.width():pt>dt?mn.width():-mn.width();break;case"autoVertical":u="top";a=pt==0&&dt==yt-1&&e?mn.height():pt==yt-1&&dt==0&&e?-mn.height():pt>dt?mn.height():-mn.height();break;case"rightToLeft":u="left";a=mn.width();break;case"leftToRight":u="left";a=-mn.width();break;case"topToBottom":u="top";a=-mn.height();break;case"bottomToTop":u="top";a=mn.height();break;default:u="left";a=pt>dt?mn.width():-mn.width()}t.parent().css(u,a);o[u]=0;t.parent().animate(o,{duration:i,easing:s,complete:function(){t.parent().css({left:"",top:""});dt!=-1&&n.css({visibility:"",left:"",top:""});M()},step:function(e){n&&n.parent().css(u,e-a)}})}function L(){if(dt==-1){gn.css("overflow","visible").bind("dragstart",T).find(".slide").each(function(t){var n=e(this);if(ht.settings.swipeOrientation=="horizontal")n.css({top:0,left:t*(gn.width()+ht.settings.swipeSlideDistance),visibility:"visible"});else ht.settings.swipeOrientation=="vertical"&&n.css({top:t*(gn.height()+ht.settings.swipeSlideDistance),left:0,visibility:"visible"})});ht.settings.swipeGrabCursor&&gn.addClass("grab");var t,n,r=false,s=false;if(ht.settings.swipeTouchDrag&&"ontouchstart"in window)s=r=true;if(!s&&ht.settings.swipeMouseDrag)r=true;if(ht.settings.swipeOrientation=="horizontal"){gn.css("left",-bt*(gn.width()+ht.settings.swipeSlideDistance));r&&gn.swipe({threshold:ht.settings.swipeThreshold,allowPageScroll:"vertical",swipeStatus:function(r,s,o,u){if(s=="start"){t=parseInt(gn.css("left"));gn.is(":animated")&&gn.stop();r=e(r.target).closest("a");if(r.length){r.unbind("click",T).bind("click",T);r.has("rel")&&r.unbind("click.prettyphoto")}ht.settings.swipeGrabCursor&&gn.removeClass("grab").addClass("grabbing")}else if(s=="move"){n=pt==yt-1&&o=="left"||pt==0&&o=="right"?.2:1;if(o=="left")gn.css("left",t-u*n);else o=="right"&&gn.css("left",t+u*n)}else if(s=="cancel"){gn.stop().animate({left:-pt*(gn.width()+ht.settings.swipeSlideDistance)},ht.settings.swipeBackDuration,ht.settings.swipeEasing,function(){Et&&M()});ht.settings.swipeGrabCursor&&gn.removeClass("grabbing").addClass("grab")}},click:function(t){t=e(t.target).closest("a");if(t.length){t.unbind("click",T);t.attr("rel")&&e.prettyPhoto&&t.bind("click.prettyphoto",e.prettyPhoto.initialize)}},swipeLeft:function(){pt<yt-1?b():gn.stop().animate({left:-pt*(gn.width()+ht.settings.swipeSlideDistance)},ht.settings.swipeBackDuration,ht.settings.swipeEasing,function(){Et&&M()});ht.settings.swipeGrabCursor&&gn.removeClass("grabbing").addClass("grab")},swipeRight:function(){pt>0?w():gn.stop().animate({left:-pt*(gn.width()+ht.settings.swipeSlideDistance)},ht.settings.swipeBackDuration,ht.settings.swipeEasing,function(){Et&&M()});ht.settings.swipeGrabCursor&&gn.removeClass("grabbing").addClass("grab")}})}else if(ht.settings.swipeOrientation=="vertical"){gn.css("top",-bt*(gn.height()+ht.settings.swipeSlideDistance));r&&gn.swipe({threshold:ht.settings.swipeThreshold,allowPageScroll:"horizontal",swipeStatus:function(r,s,o,u){if(s=="start"){t=parseInt(gn.css("top"));gn.is(":animated")&&gn.stop();r=e(r.target).closest("a");if(r.length){r.unbind("click",T).bind("click",T);r.has("rel")&&r.unbind("click.prettyphoto")}ht.settings.swipeGrabCursor&&gn.removeClass("grab").addClass("grabbing")}else if(s=="move"){n=pt==yt-1&&o=="up"||pt==0&&o=="down"?.2:1;if(o=="up")gn.css("top",t-u*n);else o=="down"&&gn.css("top",t+u*n)}else if(s=="cancel"){gn.stop().animate({top:-pt*(gn.height()+ht.settings.swipeSlideDistance)},ht.settings.swipeBackDuration,ht.settings.swipeEasing,function(){Et&&M()});ht.settings.swipeGrabCursor&&gn.removeClass("grabbing").addClass("grab")}},click:function(t){t=e(t.target).closest("a");if(t.length){t.unbind("click",T);t.attr("rel")&&e.prettyPhoto&&t.bind("click.prettyphoto",e.prettyPhoto.initialize)}},swipeUp:function(){pt<yt-1?b():gn.stop().animate({top:-pt*(gn.height()+ht.settings.swipeSlideDistance)},ht.settings.swipeBackDuration,ht.settings.swipeEasing,function(){Et&&M()});ht.settings.swipeGrabCursor&&gn.removeClass("grabbing").addClass("grab")},swipeDown:function(){pt>0?w():gn.stop().animate({top:-pt*(gn.height()+ht.settings.swipeSlideDistance)},ht.settings.swipeBackDuration,ht.settings.swipeEasing,function(){Et&&M()});ht.settings.swipeGrabCursor&&gn.removeClass("grabbing").addClass("grab")}})}M()}else if(ht.settings.swipeOrientation=="horizontal")gn.stop().animate({left:-pt*(gn.width()+ht.settings.swipeSlideDistance)},ht.settings.swipeDuration,ht.settings.swipeEasing,function(){if(e.support.transition&&!gn.is(":animated"))M();else e.support.transition||M()});else ht.settings.swipeOrientation=="vertical"&&gn.stop().animate({top:-pt*(gn.height()+ht.settings.swipeSlideDistance)},ht.settings.swipeDuration,ht.settings.swipeEasing,function(){if(e.support.transition&&!gn.is(":animated"))M();else e.support.transition||M()})}function A(){var t=mt[pt],n=t.properties,r=n.sliceEffectType,s=n.htmlDuringTransition,o=parseInt(n.horizontalSlices),u=parseInt(n.verticalSlices),a=n.slicePattern,f=n.slicePoint,l=n.sliceStartPosition,c=parseFloat(n.sliceStartRatio),h=parseInt(n.sliceDuration),p=n.sliceEasing,d=parseInt(n.sliceDelay),v=n.sliceFade==true||effectType=="fade"?0:1,m=n.fadePreviousSlide,g=parseInt(n.fadePreviousSlideDuration),y=Math.floor(mn.width()/o),b=Math.floor(mn.height()/u);gt[pt].find("img.image").clone();var w=gt[pt].clone(),E=[];if(dt!=-1&&m==true){var S=gt[dt];xn&&S.find("*").each(function(){e(this).hasClass(".caption-container")||e(this).parents(".caption-container").length==1||e(this).css("filter","inherit")});S.animate({opacity:0},g,function(){S.css({visibility:"",opacity:""});xn&&S.find("*").each(function(){e(this).hasClass(".caption-container")||e(this).parents(".caption-container").length==1||e(this).css("filter","")})})}w.css("visibility","visible").find(".caption-container").remove();s||w.find(".html").remove();wt=e('<div class="slice-container"></div>').appendTo(mn);n.slideMask&&wt.css("overflow","hidden");for(n=0;n<o;n++)for(s=0;s<u;s++){m=e('<div class="slice"></div>').css({left:n*y,top:s*b,width:y,height:b,opacity:v,display:"none"}).data({hPos:n,vPos:s}).appendTo(wt);var x;if(t.html||t.imagePath)x=w.clone();if(x){x.css({left:-(n*y),top:-(s*b),width:mn.width(),height:mn.height(),overflow:"hidden",position:"absolute"});m.html(x).css("overflow","hidden")}xn&&m.find("*").each(function(){e(this).css("filter","inherit")});E.push(m)}if(r=="random")r=ft(["scale","fade","width","height","slide"]);if(a=="random")a=ft(["randomPattern","topToBottom","bottomToTop","leftToRight","rightToLeft","topLeftToBottomRight","topRightToBottomLeft","bottomLeftToTopRight","bottomRightToTopLeft","horizontalMarginToCenter","horizontalCenterToMargin","marginToCenter","verticalCenterToMargin","skipOneTopToBottom","skipOneBottomToTop","skipOneLeftToRight","skipOneRightToLeft","skipOneHorizontal","skipOneVertical","spiralMarginToCenterCW","spiralMarginToCenterCCW","spiralCenterToMarginCW","spiralCenterToMarginCCW"]);if(o==1&&a=="skipOneHorizontal"||u==1&&a=="skipOneVertical")a="randomPattern";if(f=="random")f=ft(["leftTop","leftCenter","leftBottom","centerTop","centerCenter","centerBottom","rightTop","rightCenter","rightBottom"]);if(l=="random")l=ft(["left","right","top","bottom","leftTop","rightTop","leftBottom","rightBottom","horizontalAlternate","verticalAlternate"]);t=ut(E,a,o,u);En=t.length;for(n=0;n<En;n++)O(t[n],n,r,f,l,c,h,p,d)}function O(t,n,r,s,o,u,a,f,l){var c={},h={},p=parseInt(t.css("width")),d=parseInt(t.css("height")),v=parseInt(t.css("left")),m=parseInt(t.css("top")),g,y;if(r=="scale"||r=="width"||r=="height")switch(s){case"centerCenter":y=m+d*.5;g=v+p*.5;break;case"rightCenter":y=m+d*.5;g=v+p;break;case"leftCenter":y=m+d*.5;g=v;break;case"centerTop":y=m;g=v+p*.5;break;case"rightTop":y=m;g=v+p;break;case"leftTop":y=m;g=v;break;case"centerBottom":y=m+d;g=v+p*.5;break;case"rightBottom":y=m+d;g=v+p;break;case"leftBottom":y=m+d;g=v;break;default:y=m+d*.5;g=v+p*.5}else if(r=="slide")switch(o){case"left":y=m;g=v-p*u;break;case"right":y=m;g=v+p*u;break;case"top":y=m-d*u;g=v;break;case"bottom":y=m+d*u;g=v;break;case"leftTop":y=m-d*u;g=v-p*u;break;case"rightTop":y=m-d*u;g=v+p*u;break;case"leftBottom":y=m+d*u;g=v-p*u;break;case"rightBottom":y=m+d*u;g=v+p*u;break;case"horizontalAlternate":y=m;g=v+p*u*(n%2==0?1:-1);break;case"verticalAlternate":y=m+d*u*(n%2==0?1:-1);g=v;break;default:y=m;g=v-p*u}switch(r){case"fade":h={opacity:1};break;case"scale":c={width:0,height:0,left:g,top:y};h={width:p,height:d,left:v,top:m,opacity:1};break;case"width":c={width:0,left:g};h={width:p,left:v,opacity:1};break;case"height":c={height:0,top:y};h={height:d,top:m,opacity:1};break;case"slide":c={left:g,top:y};h={left:v,top:m,opacity:1};break;default:h={opacity:1}}var b=setTimeout(function(){t.css(c).css("display","block").data("delay",b).animate(h,a,f,function(){En--;if(En==0){wt.find(".slice").each(function(){e(this).remove();xn&&e(this).find("*").each(function(){e(this).css("filter","inherit")})});wt.remove();dt!=-1&&gt[dt].css({visibility:""});gt[pt].css("visibility","visible");M()}})},n*l)}function M(){var t=mt[pt],n=parseInt(t.properties.captionDelay);Et=false;if(ht.settings.slideshow&&Ot!="stopped")if(!ht.settings.slideshowLoop&&pt==yt-1)B();else{P();if(ht.settings.pauseSlideshowOnHover&&St||kt)F()}mn.find(".transition").removeClass("transition");if(pt!=vt){if(Nt&&ht.settings.effectType=="swipe"){Nt=false;D();pn&&clearTimeout(pn)}if(t.caption){Nt=true;pn=setTimeout(function(){if(!ht.settings.captionToggle||ht.settings.captionToggle&&St)_()},n)}else vt=-1}ht.settings.preloadNearbyImages&&E(pt);var r=gt[pt].children('a[rel^="slider-lightbox"]');if(r.length&&ht.settings.lightboxIcon){xt=true;n=r.attr("href");var s;n=n.indexOf("iframe=true")!=-1||n.indexOf("ajax=true")!=-1||n.indexOf("custom=true")!=-1?"link":n.indexOf("youtube.com")!=-1||n.indexOf("youtu.be")!=-1||n.indexOf("vimeo.com")!=-1?"video":"image";s=e('<div class="lightbox-icon"></div>').appendTo(mn);if(n=="video")s.addClass("play");else if(n=="link")s.addClass("hyperlink");else n=="image"&&s.addClass("magnifying");if(ht.settings.lightboxIconToggle&&!St)s.css("opacity",0);else xn||s.css({opacity:0}).stop().animate({opacity:1},ht.settings.lightboxIconFadeDuration);s.click(function(){r.trigger("click")})}if(e.fn.videoController&&(gt[pt].find(".video").length||gt[pt].find("[id^=video]").length)){if(mt[pt].videoInstance)dn=mt[pt].videoInstance;else{dn=(gt[pt].find(".video").length?gt[pt].find(".video"):gt[pt].find("[id^=video]").first()).videoController({reachVideoAction:ht.settings.reachVideoAction,leaveVideoAction:ht.settings.leaveVideoAction,start:function(){if(ht.settings.videoPlayAction=="stopSlideshow"&&!kt)j();else ht.settings.videoPlayAction=="pauseSlideshow"&&!kt&&F()},play:function(){Ct=true;if(ht.settings.videoPlayAction=="stopSlideshow"&&!kt)j();else ht.settings.videoPlayAction=="pauseSlideshow"&&!kt&&F();var t={type:"videoPlay"};e.isFunction(ht.settings.videoPlay)&&ht.settings.videoPlay.call(this,t)},pause:function(){if(ht.settings.videoPauseAction=="startSlideshow"&&!kt)P();else ht.settings.videoPauseAction=="resumeSlideshow"&&!kt&&I();var t={type:"videoPause"};e.isFunction(ht.settings.videoPause)&&ht.settings.videoPause.call(this,t)},end:function(){if(ht.settings.videoEndAction=="resetVideo")dn.stopVideo();else if(ht.settings.videoEndAction=="startSlideshow"&&!kt)P();else if(ht.settings.videoEndAction=="resumeSlideshow"&&!kt)I();else ht.settings.videoEndAction=="nextSlide"&&b();var t={type:"videoEnd"};e.isFunction(ht.settings.videoEnd)&&ht.settings.videoEnd.call(this,t)},fullscreenchange:function(){if(e.browser.msie)if(e("body").hasClass("vjs-full-window")){ht.settings.timerAnimation&&ct.find(".timer-animation").css("visibility","hidden");ht.settings.slideArrows&&mn.find(".slide-arrows").css("visibility","hidden");ht.settings.slideButtons&&ct.find(".slide-buttons").css("visibility","hidden");ht.settings.slideshowControls&&mn.find(".slideshow-controls").css("visibility","hidden");ht.settings.lightboxIcon&&mn.find(".lightbox-icon").css("visibility","hidden");if(ht.settings.thumbnailType=="scroller"||ht.settings.thumbnailType=="tooltipAndScroller")ct.find(".thumbnail-scroller").css("visibility","hidden")}else{ht.settings.timerAnimation&&ct.find(".timer-animation").css("visibility","visible");ht.settings.slideArrows&&mn.find(".slide-arrows").css("visibility","visible");ht.settings.slideButtons&&ct.find(".slide-buttons").css("visibility","visible");ht.settings.slideshowControls&&mn.find(".slideshow-controls").css("visibility","visible");ht.settings.lightboxIcon&&mn.find(".lightbox-icon").css("visibility","visible");if(ht.settings.thumbnailType=="scroller"||ht.settings.thumbnailType=="tooltipAndScroller")ct.find(".thumbnail-scroller").css("visibility","visible")}var t={type:"videoFullscreenChange"};e.isFunction(ht.settings.videoFullscreenChange)&&ht.settings.videoFullscreenChange.call(this,t)}});mt[pt].videoInstance=dn}dn.reachVideo()}t={type:"transitionComplete",index:pt,data:t};e.isFunction(ht.settings.transitionComplete)&&ht.settings.transitionComplete.call(this,t)}function _(){vt=pt;var t=mt[vt].properties,n=t.captionPosition,r=t.captionSize,s=t.captionWidth,o=t.captionHeight,u=t.captionLeft,a=t.captionTop,f=t.captionShowEffect,l=parseInt(t.captionShowEffectDuration),c=t.captionShowEffectEasing,h=t.captionShowSlideDirection;s=n=="custom"?s:"100%";o=n=="custom"?o:"100%";u=n=="custom"?u:0;a=n=="custom"?a:0;var p=gt[pt].find(".caption-container"),d=p.find(".wrapper");d.find(".background");d.find(".caption");parseFloat(t.captionBackgroundOpacity);t=t.captionBackgroundColor;var v=f=="fade"?0:r;switch(n){case"left":p.css({width:r,height:o,left:u,top:a});h=="auto"&&d.css({width:r,height:o,left:-v,top:0});break;case"right":p.css({width:r,height:o,right:u,top:a});h=="auto"&&d.css({width:r,height:o,left:v,top:0});break;case"top":p.css({width:s,height:r,left:u,top:a});h=="auto"&&d.css({width:s,height:r,left:0,top:-v});break;case"bottom":p.css({width:s,height:r,left:u,bottom:a});h=="auto"&&d.css({width:s,height:r,left:0,top:v});break;case"custom":p.css({width:s,height:o,left:u,top:a});d.css({width:s,height:o,left:0,top:0});break;case"default":p.css({width:s,height:r,left:u,bottom:a});h=="auto"&&d.css({width:s,height:r,left:0,top:v})}if(f=="fade")xn?p.css("visibility","visible"):d.stop().css({opacity:0}).animate({opacity:1},l,c);else{xn?p.css("visibility","visible"):d.stop().css({opacity:1});n=="custom"&&p.css({width:s,height:o,left:u,top:a});if(h=="topToBottom")d.css({width:s,height:o,left:0,top:-o});else if(h=="bottomToTop")d.css({width:s,height:o,left:0,top:o});else if(h=="leftToRight")d.css({width:s,height:o,left:-s,top:0});else h=="rightToLeft"&&d.css({width:s,height:o,left:s,top:0});e.browser.msie&&e.browser.version=="6.0"&&d.css("background-color",t);d.stop().animate({top:0,left:0},l,c)}}function D(){if(vt!=-1){var e=gt[vt].find(".caption-container"),t=e.find(".wrapper");t.find(".background");t.find(".caption");var n=mt[vt].properties,r=n.captionPosition,i=n.captionHideEffect,s=parseInt(n.captionHideEffectDuration),o=n.captionHideEffectEasing;n=n.captionHideSlideDirection;if(i=="fade")xn?e.css("visibility","hidden"):t.stop().animate({opacity:0},s,o);else if(n=="topToBottom")t.animate({top:t.height()},s);else if(n=="bottomToTop")t.animate({top:-t.height()},s);else if(n=="leftToRight")t.animate({left:t.width()},s);else if(n=="rightToLeft")t.animate({left:-t.width()},s);else if(n=="auto")switch(r){case"left":t.stop().animate({left:-t.width()},s);break;case"right":t.stop().animate({left:t.width()},s);break;case"top":t.stop().animate({top:-t.height()},s);break;case"bottom":t.stop().animate({top:t.height()},s);break;case"custom":t.stop().animate({top:t.height()},s);break;case"default":t.stop().animate({top:t.height()},s)}}}function P(){var e=mt[pt].properties.slideshowDelay;Ot="playing";ht.settings.timerAnimation&&q(e);Mt=0;_t=(new Date).getTime();Lt&&clearTimeout(Lt);Lt=setTimeout(function(){hn="slideshow";if(ht.settings.slideshowDirection=="next")b();else ht.settings.slideshowDirection=="previous"&&w()},e)}function H(){if(!ht.settings.slideshow)ht.settings.slideshow=true;ct.find(".slideshow-controls").removeClass("play").addClass("pause");P()}function B(){ct.find(".slideshow-controls").removeClass("pause").addClass("play");Ot="stopped";j()}function j(){Lt&&clearTimeout(Lt);ht.settings.timerAnimation&&R()}function F(){if(ht.settings.slideshow&&Ot=="playing"&&!Et){Lt&&clearTimeout(Lt);Ot="paused";Mt+=(new Date).getTime()-_t}}function I(){if(ht.settings.slideshow&&Ot=="paused"&&!Et){var e=mt[pt].properties.slideshowDelay;Ot="playing";_t=(new Date).getTime();Lt&&clearTimeout(Lt);Lt=setTimeout(function(){if(ht.settings.slideshowDirection=="next")b();else ht.settings.slideshowDirection=="previous"&&w()},e-Mt)}}function q(t){var n=document.createElement("canvas"),r=Math.max(ht.settings.timerStrokeWidth1,ht.settings.timerStrokeWidth2)+ht.settings.timerRadius*2,s=r/2,o=Math.PI/180,u=0,a,f,l=ht.settings.timerStrokeOpacity1,c=ht.settings.timerStrokeOpacity2,h=lt(ht.settings.timerStrokeColor1).red,p=lt(ht.settings.timerStrokeColor1).green,d=lt(ht.settings.timerStrokeColor1).blue,v=lt(ht.settings.timerStrokeColor2).red,m=lt(ht.settings.timerStrokeColor2).green,g=lt(ht.settings.timerStrokeColor2).blue;n.width=n.height=r;var y=e('<div class="timer-animation"></div>').css({width:r,height:r}).appendTo(mn);e(n).appendTo(y);if(ht.settings.timerAnimationControls){e('<div class="timer-animation-controls"></div>').appendTo(y);kt?y.addClass("play"):y.addClass("pause");y.click(function(){if(kt){if(kt){kt=false;y.removeClass("play").addClass("pause");ht.settings.pauseSlideshowOnHover&&St||I()}}else{kt=true;y.removeClass("pause").addClass("play");ht.settings.pauseSlideshowOnHover&&St||F()}})}if(ht.settings.timerToggle&&!St)y.css("opacity",1);else xn||y.css({opacity:1}).stop().animate({opacity:1},ht.settings.timerFadeDuration);var b;if(n.getContext)b=n.getContext("2d");else if(typeof G_vmlCanvasManager!="undefined"&&xn)b=G_vmlCanvasManager.initElement(n).getContext("2d");else return;b.beginPath();b.lineWidth=ht.settings.timerStrokeWidth1;b.strokeStyle="rgba("+h+", "+p+", "+d+", "+l+")";b.arc(s,s,ht.settings.timerRadius,0,2*Math.PI,false);b.stroke();At=setInterval(function(){if(u<=360&&!(ht.settings.pauseSlideshowOnHover&&St||Tt||kt||Ot=="paused")){a=(new Date).getTime();f=a-_t;u=(Mt+f)/t*360+1;if(u>360)u=360;n.width=n.width;b.beginPath();b.lineWidth=ht.settings.timerStrokeWidth1;b.strokeStyle="rgba("+h+", "+p+", "+d+", "+l+")";b.arc(s,s,ht.settings.timerRadius,0,2*Math.PI,false);b.stroke();b.beginPath();b.lineWidth=ht.settings.timerStrokeWidth2;b.strokeStyle="rgba("+v+", "+m+", "+g+", "+c+")";b.arc(s,s,ht.settings.timerRadius,0,u*o,false);b.stroke()}},20)}function R(){At&&clearInterval(At);var e=mn.find(".timer-animation");if(e)xn?e.remove():e.stop().animate({opacity:1},ht.settings.timerFadeDuration,function(){e.remove()})}function U(){jt=e('<div class="thumbnail-scroller"></div>').appendTo(ct);Ft=e('<div class="visible-container"></div>').appendTo(jt);It=e('<ul class="container"></ul>').appendTo(Ft);ht.settings.thumbnailOrientation=="horizontal"?jt.addClass("horizontal"):jt.addClass("vertical");ht.settings.thumbnailScrollerOverlay&&jt.addClass("overlay");for(var t=0;t<yt;t++)if(mt[t].thumbnail&&(mt[t].properties.thumbnailType=="scroller"||mt[t].properties.thumbnailType=="tooltipAndScroller")){var n=mt[t].thumbnail.is("a"),r=n?mt[t].thumbnail.find("img").removeClass("thumbnail"):mt[t].thumbnail,s=r.attr("src"),o=r.attr("alt");r.attr("title");var u=e('<li class="thumbnail-wrapper"></li>').appendTo(It);if(n){n=mt[t].thumbnail;n.addClass("thumbnail").css({width:ht.settings.thumbnailWidth,height:ht.settings.thumbnailHeight}).attr("data-index",t).appendTo(u);if(r[0].complete||r[0].readyState=="complete"){r.css("margin-left",(ht.settings.thumbnailWidth-r.width())*.5);r.css("margin-top",(ht.settings.thumbnailHeight-r.height())*.5);n.css("background-image","none")}else r.load(function(){e(this).css("margin-left",(ht.settings.thumbnailWidth-e(this).width())*.5);e(this).css("margin-top",(ht.settings.thumbnailHeight-e(this).height())*.5);e(this).parent().css("background-image","none")})}else{n=e('<a class="thumbnail"></a>').css({"background-image":"url("+s+")",width:ht.settings.thumbnailWidth,height:ht.settings.thumbnailHeight}).attr("data-index",t).appendTo(u);mt[t].thumbnail.attr("title")&&n.attr("title",mt[t].thumbnail.attr("title"))}u.css({width:n.outerWidth(),height:n.outerHeight()});Kt=ht.settings.thumbnailLayers==-1||ht.settings.thumbnailLayers*ht.settings.maximumVisibleThumbnails>yt?Math.ceil(yt/ht.settings.maximumVisibleThumbnails):ht.settings.thumbnailLayers;if(ht.settings.thumbnailOrientation=="horizontal"){u.css("left",Math.floor(Dt/Kt)*u.outerWidth(true));u.css("top",Dt%Kt*u.outerHeight(true))}else{u.css("left",Dt%Kt*u.outerWidth(true));u.css("top",Math.floor(Dt/Kt)*u.outerHeight(true))}if(o){r=e('<div class="caption"></div>').appendTo(n);s=e('<div class="background"></div>').appendTo(r);o=e('<div class="content">'+o+"</div>").appendTo(r);r.css("height",o.outerHeight(true));ht.settings.thumbnailCaptionPosition=="top"?r.css({top:0}):r.css({bottom:0});if(ht.settings.thumbnailCaptionToggle)if(ht.settings.thumbnailCaptionEffect=="slide")ht.settings.thumbnailCaptionPosition=="top"?r.css({top:-r.outerHeight(true)}):r.css({bottom:-r.outerHeight(true)});else if(xn){s.data("opacity",s.css("opacity"));s.css("opacity",0);o.css("opacity",0)}else r.css("opacity",0)}u=u.children('a[rel^="slider-lightbox"]');o=gt[t].children('a[rel^="slider-lightbox"]');r=u.length&&ht.settings.lightboxIcon;s=o.length&&ht.settings.thumbnailLightboxIcon;if(r||s){u=r?u.attr("href"):o.attr("href");u=u.indexOf("iframe=true")!=-1||u.indexOf("ajax=true")!=-1||u.indexOf("custom=true")!=-1?"link":u.indexOf("youtube.com")!=-1||u.indexOf("youtu.be")!=-1||u.indexOf("vimeo.com")!=-1?"video":"image";o=e('<div class="lightbox-icon"></div>').appendTo(n);if(u=="video")o.addClass("play");else if(u=="link")o.addClass("hyperlink");else u=="image"&&o.addClass("magnifying");ht.settings.thumbnailLightboxIconToggle&&o.css("opacity",0)}n.hover(function(){e(this).hasClass("select")||e(this).addClass("over");var t=parseInt(e(this).data("index"));if(ht.settings.thumbnailCaptionToggle){var n=e(this).children(".caption"),r=n.children(".background"),s=n.children(".content"),o=r.data("opacity");if(ht.settings.thumbnailCaptionEffect=="slide")ht.settings.thumbnailCaptionPosition=="top"?n.stop().animate({top:0},ht.settings.thumbnailCaptionShowDuration,ht.settings.thumbnailCaptionEasing):n.stop().animate({bottom:0},ht.settings.thumbnailCaptionShowDuration,ht.settings.thumbnailCaptionEasing);else if(xn){r.stop().animate({opacity:o},ht.settings.thumbnailCaptionShowDuration,ht.settings.thumbnailCaptionEasing);s.stop().animate({opacity:1},ht.settings.thumbnailCaptionShowDuration,ht.settings.thumbnailCaptionEasing)}else n.stop().animate({opacity:1},ht.settings.thumbnailCaptionShowDuration,ht.settings.thumbnailCaptionEasing)}if(ht.settings.thumbnailLightboxIconToggle){n=e(this).children(".lightbox-icon");xn?n.css("filter",""):n.stop().animate({opacity:1},ht.settings.lightboxIconFadeDuration)}ht.settings.thumbnailTooltip&&st(t);t={type:"thumbnailMouseOver",index:t};e.isFunction(ht.settings.thumbnailMouseOver)&&ht.settings.thumbnailMouseOver.call(this,t)},function(){e(this).hasClass("select")||e(this).removeClass("over");var t=parseInt(e(this).data("index"));if(ht.settings.thumbnailCaptionToggle){var n=e(this).children(".caption"),r=n.children(".background"),s=n.children(".content");if(ht.settings.thumbnailCaptionEffect=="slide")ht.settings.thumbnailCaptionPosition=="top"?n.stop().animate({top:-n.outerHeight(true)},ht.settings.thumbnailCaptionHideDuration,ht.settings.thumbnailCaptionEasing):n.stop().animate({bottom:-n.outerHeight(true)},ht.settings.thumbnailCaptionHideDuration,ht.settings.thumbnailCaptionEasing);else if(xn){r.stop().animate({opacity:0},ht.settings.thumbnailCaptionHideDuration,ht.settings.thumbnailCaptionEasing);s.stop().animate({opacity:0},ht.settings.thumbnailCaptionHideDuration,ht.settings.thumbnailCaptionEasing)}else n.stop().animate({opacity:0},ht.settings.thumbnailCaptionHideDuration,ht.settings.thumbnailCaptionEasing)}if(ht.settings.thumbnailLightboxIconToggle){n=e(this).children(".lightbox-icon");xn?n.css("opacity",0):n.stop().animate({opacity:0},ht.settings.lightboxIconFadeDuration)}ht.settings.thumbnailTooltip&&ot(t);t={type:"thumbnailMouseOut",index:t};e.isFunction(ht.settings.thumbnailMouseOut)&&ht.settings.thumbnailMouseOut.call(this,t)});n.click(function(){var t=e(this).data("index");hn="thumbnail";var n={type:"thumbnailClick",index:t};e.isFunction(ht.settings.thumbnailClick)&&ht.settings.thumbnailClick.call(this,n);e(this).attr("href")||y(t)});Dt++}qt=jt.find(".thumbnail-wrapper").outerWidth(true);Rt=jt.find(".thumbnail-wrapper").outerHeight(true);Jt=Math.ceil(Dt/(ht.settings.maximumVisibleThumbnails*Kt));if(ht.settings.thumbnailOrientation=="horizontal"){jt.css({height:Rt*Kt,width:qt*ht.settings.maximumVisibleThumbnails});Ft.css({height:Rt*Kt,width:qt*ht.settings.maximumVisibleThumbnails})}else{jt.css({width:qt*Kt,height:Rt*ht.settings.maximumVisibleThumbnails});Ft.css({width:qt*Kt,height:Rt*ht.settings.maximumVisibleThumbnails})}ht.settings.thumbnailArrows&&W();ht.settings.thumbnailButtons&&X();ht.settings.thumbnailScrollbar&&Z();ht.settings.thumbnailMouseScroll&&G();ht.settings.thumbnailMouseWheel&&Y();ht.settings.thumbnailTooltip&&e('<div class="advanced-slider-tooltip"><div class="content"></div></div>').hide().appendTo(e("body"));z();if(ht.settings.thumbnailScrollerToggle){jt.css({opacity:0});jt.hover(function(){xn?jt.css("filter",""):jt.stop().animate({opacity:1},ht.settings.thumbnailScrollerShowDuration)},function(){xn?jt.css("opacity",0):jt.stop().animate({opacity:0},ht.settings.thumbnailScrollerHideDuration)})}}function z(){if(ht.settings.thumbnailOrientation=="horizontal"){var e=ht.settings.thumbnailArrows?parseInt(jt.css("paddingLeft"))+parseInt(jt.css("paddingRight")):0;Bt=Math.ceil(Dt/Kt)*qt;Pt=ht.settings.thumbnailScrollerResponsive?Math.max(ht.settings.minimumVisibleThumbnails,Math.min(Math.ceil(Dt/Kt),ht.settings.maximumVisibleThumbnails,Math.floor((mn.outerWidth()-e)/qt))):Math.min(Dt,ht.settings.maximumVisibleThumbnails);jt.css("width",qt*Pt);Ft.css("width",qt*Pt)}else{e=ht.settings.thumbnailArrows?parseInt(jt.css("paddingTop"))+parseInt(jt.css("paddingBottom")):0;Bt=Math.ceil(Dt/Kt)*Rt;Pt=ht.settings.thumbnailScrollerResponsive?Math.max(ht.settings.minimumVisibleThumbnails,Math.min(Math.ceil(Dt/Kt),ht.settings.maximumVisibleThumbnails,Math.floor((mn.outerHeight()-e)/Rt))):Math.min(Dt,ht.settings.maximumVisibleThumbnails);jt.css("height",Pt*Rt);Ft.css("height",Pt*Rt)}if(ht.settings.thumbnailScrollerCenter)if(ht.settings.thumbnailOrientation=="horizontal")jt.css("left",(vn.outerWidth()-jt.outerWidth())/2);else ht.settings.thumbnailOrientation=="vertical"&&jt.css("top",(mn.outerHeight()-jt.outerHeight())/2);if(Ht!=Pt){Ht=Pt;Jt=Math.ceil(Dt/(Pt*Kt));ht.settings.thumbnailButtons&&ht.settings.thumbnailScrollerResponsive&&X();if(ht.settings.thumbnailScrollbar&&ht.settings.thumbnailScrollerResponsive)if(ht.settings.thumbnailOrientation=="horizontal"){Wt.css("width",jt.width());Vt.css("width",Wt.width()-thumbnailScrollerScrollbarEdgeSize);Wt.css("left",(jt.outerWidth()-Wt.width())/2)}else{Wt.css("height",jt.height());Vt.css("height",Wt.height()-thumbnailScrollerScrollbarEdgeSize);Wt.css("top",(jt.outerHeight()-Wt.height())/2)}J($t)}}function W(){Ut=e('<div class="arrows"></div>').appendTo(jt);var t=e('<a class="previous"></a>').click(function(){$()}).appendTo(Ut),n=e('<a class="next"></a>').click(function(){V()}).appendTo(Ut);if(ht.settings.thumbnailOrientation=="horizontal"){t.css({top:Math.round((Rt*Kt-t.height())/2)});n.css({top:Math.round((Rt*Kt-n.height())/2)})}else{t.css({left:Math.round((qt*Kt-t.width())/2)});n.css({left:Math.round((qt*Kt-n.width())/2)})}if(ht.settings.thumbnailArrowsToggle){e.browser.msie?Ut.hide():Ut.css("opacity",0);jt.hover(function(){e.browser.msie?Ut.show():Ut.stop().animate({opacity:1},ht.settings.thumbnailArrowsShowDuration)},function(){e.browser.msie?Ut.hide():Ut.stop().animate({opacity:0},ht.settings.thumbnailArrowsHideDuration)})}}function X(){if(!zt){zt=e('<div class="buttons"></div>').appendTo(jt);if(ht.settings.thumbnailButtonsToggle){xn?zt.hide():zt.css("opacity",0);jt.hover(function(){xn?zt.show():zt.stop().animate({opacity:1},ht.settings.thumbnailButtonsShowDuration)},function(){xn?zt.hide():zt.stop().animate({opacity:0},ht.settings.thumbnailButtonsShowDuration)})}}if(Jt==1)zt.empty();else if(zt.find(".buttons a").length!=Jt&&Jt>1){zt.empty();for(var t,n=0;n<Jt;n++){var r=e('<a rel="'+n+'"></a>').appendTo(zt);if(ht.settings.thumbnailOrientation=="horizontal"){t=r.outerWidth(true);r.css("left",n*t)}else{t=r.outerHeight(true);r.css("top",n*t)}r.bind({mouseover:function(){e(this).hasClass("select")||e(this).addClass("over")},mouseout:function(){e(this).hasClass("select")||e(this).removeClass("over")},click:function(){var t=parseInt(e(this).attr("rel"));J(t)}})}if(ht.settings.thumbnailOrientation=="horizontal"){zt.css("top",Rt*Kt);zt.css("width",t*Jt);zt.css("height",t);jt.css("height",Math.max(jt.height(),zt.position().top+zt.outerHeight(true)))}else{zt.css("left",qt*Kt);zt.css("height",t*Jt);zt.css("width",t);jt.css("width",Math.max(jt.width(),zt.position().left+zt.outerWidth(true)))}if($t>Jt-1)$t=Jt-1;zt.find("a").eq($t).addClass("select")}ht.settings.thumbnailOrientation=="horizontal"?zt.css("left",(jt.outerWidth()-zt.outerWidth())/2):zt.css("top",(jt.outerHeight()-zt.outerHeight())/2)}function V(){if($t<Jt-1){$t++;J($t)}else J(0)}function $(){if($t>0){$t--;J($t)}else J(Jt-1)}function J(e){var t=ht.settings.thumbnailOrientation=="horizontal"?Ft.width():Ft.height(),n=e*t;$t=e;if($t==Jt-1)n=Bt-t;nt();It.animate(ht.settings.thumbnailOrientation=="horizontal"?{left:-n}:{top:-n},{duration:ht.settings.thumbnailScrollDuration,easing:ht.settings.thumbnailScrollEasing,step:function(){it()},complete:function(){rt()}});if(ht.settings.thumbnailButtons){t=jt.find(".buttons");t.find(".select").removeClass("select");t.find("a").eq(e).removeClass("over").addClass("select")}}function K(){un=setInterval(function(){if(sn!=on){sn=on;if(fn){clearTimeout(an);fn=false}if(ln){ln=false;if(ht.settings.slideArrows&&ht.settings.slideArrowsToggle)xn?ct.find(".slide-arrows a").stop().show():ct.find(".slide-arrows a").stop().animate({opacity:1},ht.settings.slideArrowsShowDuration);if(ht.settings.slideshowControls&&ht.settings.slideshowControlsToggle)xn?ct.find(".slideshow-controls").stop().show():ct.find(".slideshow-controls").stop().animate({opacity:1},ht.settings.slideshowControlsShowDuration);if(ht.settings.slideButtons&&ht.settings.slideButtonsToggle)xn?ct.find(".slide-buttons").stop().show():ct.find(".slide-buttons").stop().animate({opacity:1},ht.settings.slideButtonsShowDuration)}}else if(!fn){fn=true;an=setTimeout(function(){ln=true;if(ht.settings.slideArrows&&ht.settings.slideArrowsToggle)xn?ct.find(".slide-arrows a").stop().hide():ct.find(".slide-arrows a").stop().animate({opacity:0},ht.settings.slideArrowsHideDuration);if(ht.settings.slideshowControls&&ht.settings.slideshowControlsToggle)xn?ct.find(".slideshow-controls").stop().hide():ct.find(".slideshow-controls").stop().animate({opacity:0},ht.settings.slideshowControlsHideDuration);if(ht.settings.slideButtons&&ht.settings.slideButtonsToggle)xn?ct.find(".slide-buttons").stop().hide():ct.find(".slide-buttons").stop().animate({opacity:0},ht.settings.slideButtonsHideDuration)},ht.settings.autoToggleDelay)}},500)}function Q(){clearInterval(un);clearTimeout(an)}function G(){ht.settings.thumbnailMouseScroll=true;var e=0,t=false,n=Ft.offset().top,r=Ft.offset().left,i=Ft.width(),s=Ft.height(),o=ht.settings.thumbnailOrientation=="horizontal"?i:s,u=ht.settings.thumbnailOrientation=="horizontal"?r:n,a=ht.settings.thumbnailOrientation=="horizontal"?"left":"top",f=parseInt(It.css(a));Qt=setInterval(function(){if(!t){t=true;n=Ft.offset().top;r=Ft.offset().left;i=Ft.width();s=Ft.height()}if(nn>r&&nn<r+i&&rn>n&&rn<n+s){e=Math.round((-((Bt-o+200)*(((ht.settings.thumbnailOrientation=="horizontal"?nn:rn)-u)/o))+100-f)*ht.settings.thumbnailMouseScrollSpeed/100);f+=e}else if(Math.abs(e)>.1){e*=ht.settings.thumbnailMouseScrollEase/100;f+=e}else e=0;if(Math.abs(e)>0){if(f>=0)f=0;else if(f<=o-Bt)f=o-Bt;it();It.css(a,f)}},30)}function Y(){ht.settings.thumbnailMouseWheel=true;var e=0,t=ht.settings.thumbnailMouseWheelReverse?-1:1,n,r=ht.settings.thumbnailOrientation=="horizontal"?"left":"top",i=ht.settings.thumbnailOrientation=="horizontal"?Ft.width():Ft.height();Ft.bind("mousewheel",function(s,o){s.preventDefault();if(!Yt){nt();Yt=true;e=n=parseInt(It.css(r));Gt=setInterval(function(){if(Math.abs(e-n)>.5){n+=(e-n)*(ht.settings.thumbnailMouseWheelSpeed/100);it();It.css(r,n)}else rt()},30)}e+=t*o*10;if(e>=0)e=0;else if(e<=i-Bt)e=i-Bt})}function Z(){function t(){c=(ht.settings.thumbnailOrientation=="horizontal"?nn:rn)-Xt.offset()[m]-h;n()}function n(){if(c<0)c=0;else if(c>parseInt(Xt.css(v))-parseInt(l.css(v)))c=parseInt(Xt.css(v))-parseInt(l.css(v));en&&l.css(m,c);p=c/(parseInt(Xt.css(v))-parseInt(l.css(v)));if(!tn){nt();tn=true;d=parseInt(It.css(m));Zt=setInterval(function(){if(Math.abs(et()+p)>.001){var e=(-p*(Bt-parseInt(Ft.css(v)))-d)*ht.settings.thumbnailScrollbarEase/100;d+=e;it();It.css(m,d)}else tn&&rt()},30)}}Wt=e('<div class="scrollbar"></div>').appendTo(jt);var r=e('<div class="back"></div>').appendTo(Wt),s=e('<div class="track"></div>').appendTo(Wt),o=e('<div class="forward"></div>').appendTo(Wt),u=e('<div class="track-middle"></div>').appendTo(s),a=e('<div class="track-back"></div>').appendTo(s),f=e('<div class="track-forward"></div>').appendTo(s),l=e('<div class="thumb"></div>').appendTo(s);e('<div class="thumb-middle"></div>').appendTo(l);e('<div class="thumb-back"></div>').appendTo(l);e('<div class="thumb-forward"></div>').appendTo(l);var c=0,h,p=0,d=0,v=ht.settings.thumbnailOrientation=="horizontal"?"width":"height",m=ht.settings.thumbnailOrientation=="horizontal"?"left":"top";Wt.addClass(ht.settings.scrollbarSkin);Xt=s;if(ht.settings.thumbnailOrientation=="horizontal"){Wt.addClass("horizontal");Wt.css({top:Rt*Kt,left:(jt.outerWidth()-Wt.width())/2});jt.css("height",Math.max(jt.height(),Wt.position().top+Wt.outerHeight(true)))}else{Wt.addClass("vertical");Wt.css({left:qt*Kt,top:(jt.outerHeight()-Wt.height())/2});jt.css("width",Math.max(jt.width(),Wt.position().left+Wt.outerWidth(true)))}if(r.width()==0&&o.width()==0){Vt=u;thumbnailScrollerScrollbarEdgeSize=ht.settings.thumbnailOrientation=="horizontal"?a.width()+f.width():a.height()+f.height()}else{Vt=s;thumbnailScrollerScrollbarEdgeSize=ht.settings.thumbnailOrientation=="horizontal"?r.width()+o.width():r.height()+o.height()}if(ht.settings.thumbnailScrollbarToggle){xn?Wt.hide():Wt.css("opacity",0);jt.hover(function(){xn?Wt.show():Wt.stop().animate({opacity:1},ht.settings.thumbnailScrollbarShowDuration)},function(){xn?Wt.hide():Wt.stop().animate({opacity:0},ht.settings.thumbnailScrollbarShowDuration)})}l.bind("mousedown",function(n){n.preventDefault();h=(ht.settings.thumbnailOrientation=="horizontal"?nn:rn)-l.offset()[m];en=true;e(document).bind("mousemove",t)});e(document).bind("mouseup",function(){if(en){en=false;e(document).unbind("mousemove",t)}});r.bind("click",function(){c=parseInt(l.css(m))-ht.settings.scrollbarArrowScrollAmount;n()});o.bind("click",function(){c=parseInt(l.css(m))+ht.settings.scrollbarArrowScrollAmount;n()})}function et(){var e=ht.settings.thumbnailOrientation=="horizontal"?"width":"height";return parseFloat(It.css(ht.settings.thumbnailOrientation=="horizontal"?"left":"top"))/(Bt-parseInt(Ft.css(e)))}function tt(){Qt&&clearInterval(Qt);if(Gt){Yt=false;clearInterval(Gt)}if(Zt){tn=false;clearInterval(Zt)}}function nt(){tt();It&&It.is(":animated")&&It.stop()}function rt(){tt();ht.settings.thumbnailMouseScroll&&G()}function it(){if(ht.settings.thumbnailScrollbar&&!en){var e=Xt.find(".thumb"),t=ht.settings.thumbnailOrientation=="horizontal"?"left":"top",n=ht.settings.thumbnailOrientation=="horizontal"?"width":"height";n=parseInt(Xt.css(n))-parseInt(e.css(n));var r=-et()*n;r>=0&&r<=n&&e.css(t,r)}}function st(t){t=jt.find('.thumbnail[data-index="'+t+'"]');var n=t.attr("title");if(n){var r=e("body").find(".advanced-slider-tooltip");t.removeAttr("title");r.find(".content").html(n);var s=r.outerWidth()/2,o=r.outerHeight()+parseInt(r.css("marginBottom"));r.css({left:nn,top:rn});r.stop(false,true).fadeIn(ht.settings.tooltipShowDuration);e(document).bind("mousemove.tooltip",function(){r.css({left:nn-s,top:rn-o})})}}function ot(t){var n=e("body").find(".advanced-slider-tooltip"),r=n.find(".content").html();t=jt.find('.thumbnail[data-index="'+t+'"]');if(r){t.attr("title",r);n&&n.stop(false,true).fadeOut(ht.settings.tooltipHideDuration,function(){e(document).unbind("mousemove.tooltip");n.css("left",-9999)})}}function ut(e,t,n,r){var i=[],s,o,u=0;switch(t){case"randomPattern":for(n=[];e.length;){u=Math.floor(Math.random()*e.length);n.push(e[u]);e.splice(u,1)}var a=n.length;for(t=0;t<a;t++)i[t]=n[t];break;case"topToBottom":for(o=0;o<r;o++)for(s=0;s<n;s++)i.push(at(e,s,o));break;case"bottomToTop":for(o=r-1;o>=0;o--)for(s=n-1;s>=0;s--)i.push(at(e,s,o));break;case"rightToLeft":for(s=n-1;s>=0;s--)for(o=r-1;o>=0;o--)i.push(at(e,s,o));break;case"leftToRight":for(s=0;s<n;s++)for(o=0;o<r;o++)i.push(at(e,s,o));break;case"topLeftToBottomRight":for(t=0;t<n+r-1;t++){o=0;for(s=t;s>=0;s--){at(e,s,o)!=undefined&&i.push(at(e,s,o));o++}}break;case"bottomLeftToTopRight":u=n>r?n:r;for(t=n-1;t>=1-u;t--){s=0;for(o=t;o<=n-1;o++){at(e,s,o)!=undefined&&i.push(at(e,s,o));s++}}break;case"topRightToBottomLeft":u=n>r?n:r;for(t=n-1;t>=1-u;t--){s=t;for(o=0;o<=r-1;o++){at(e,s,o)!=undefined&&i.push(at(e,s,o));s++}}break;case"bottomRightToTopLeft":for(t=r+n-2;t>=0;t--){o=0;for(s=t;s>=0;s--){at(e,s,o)!=undefined&&i.push(at(e,s,o));o++}}break;case"horizontalMarginToCenter":if(n%2){for(s=0;s<Math.floor(n/2);s++)for(o=0;o<r;o++){i.push(at(e,s,o));i.push(at(e,n-1-s,o))}for(t=0;t<r;t++)i.push(at(e,Math.floor(n/2),t))}else for(s=0;s<Math.floor(n/2);s++)for(o=0;o<r;o++){i.push(at(e,s,o));i.push(at(e,n-1-s,o))}break;case"horizontalCenterToMargin":if(n%2)for(t=0;t<r;t++)i.push(at(e,Math.floor(n/2),t));for(s=Math.floor(n/2)-1;s>=0;s--)for(o=0;o<r;o++){i.push(at(e,s,o));i.push(at(e,n-1-s,o))}break;case"verticalMarginToCenter":if(r%2){for(o=0;o<Math.floor(r/2);o++)for(s=0;s<n;s++){i.push(at(e,s,o));i.push(at(e,s,r-1-o))}for(t=0;t<n;t++)i.push(at(e,t,Math.floor(r/2)))}else for(o=0;o<Math.floor(r/2);o++)for(s=0;s<n;s++){i.push(at(e,s,o));i.push(at(e,s,r-1-o))}break;case"verticalCenterToMargin":if(r%2)for(t=0;t<n;t++)i.push(at(e,t,Math.floor(r/2)));for(o=Math.floor(r/2)-1;o>=0;o--)for(s=0;s<n;s++){i.push(at(e,s,o));i.push(at(e,s,r-1-o))}break;case"skipOneTopToBottom":for(o=0;o<r;o++){for(s=u;s<n;s+=2)i.push(at(e,s,o));u==0?u=1:u=0}u=1;for(o=0;o<r;o++){for(s=u;s<n;s+=2)i.push(at(e,s,o));u==0?u=1:u=0}break;case"skipOneBottomToTop":for(o=r-1;o>=0;o--){for(s=u;s<n;s+=2)i.push(at(e,s,o));u==0?u=1:u=0}u=1;for(o=r-1;o>=0;o--){for(s=u;s<n;s+=2)i.push(at(e,s,o));u==0?u=1:u=0}break;case"skipOneLeftToRight":for(s=0;s<n;s++){for(o=u;o<r;o+=2)i.push(at(e,s,o));u==0?u=1:u=0}u=1;for(s=0;s<n;s++){for(o=u;o<r;o+=2)i.push(at(e,s,o));u==0?u=1:u=0}break;case"skipOneRightToLeft":for(s=n-1;s>=0;s--){for(o=u;o<r;o+=2)i.push(at(e,s,o));u==0?u=1:u=0}u=1;for(s=n-1;s>=0;s--){for(o=u;o<r;o+=2)i.push(at(e,s,o));u==0?u=1:u=0}break;case"skipOneVertical":if(r%2)for(o=0;o<r;o++){for(s=u;s<n;s+=2){if(o==Math.floor(r/2)){o++;for(t=1-n%2;t<n;t+=2){i.push(at(e,t,Math.floor(r/2)));at(e,t-1,Math.floor(r/2))!=undefined&&i.push(at(e,t-1,Math.floor(r/2)))}}i.push(at(e,s,o));i.push(at(e,s,r-o-1))}u==0?u=1:u=0}else for(o=0;o<r;o++){for(s=u;s<n;s+=2){i.push(at(e,s,o));i.push(at(e,s,r-o-1))}u==0?u=1:u=0}break;case"skipOneHorizontal":if(n%2)for(s=0;s<n;s++){for(o=u;o<r;o+=2){if(s==Math.floor(n/2)){s++;for(t=1-r%2;t<r;t+=2){i.push(at(e,Math.floor(n/2),t));at(e,Math.floor(n/2),t-1)!=undefined&&i.push(at(e,Math.floor(n/2),t-1))}}i.push(at(e,s,o));i.push(at(e,n-1-s,o))}u==0?u=1:u=0}else for(s=0;s<n;s++){for(o=u;o<r;o+=2){i.push(at(e,s,o));i.push(at(e,n-1-s,o))}u==0?u=1:u=0}break;case"spiralMarginToCenterCW":var f=n,l=r,c,h=0,p=r<n?r:n;a=Math.floor(p/2);for(c=0;c<a;c++){for(s=h++;s<f;s++)i.push(at(e,s,h-1));f--;for(o=h;o<l;o++)i.push(at(e,n-h,o));l--;for(t=f;t>=n-f;t--)i.push(at(e,t-1,l));for(u=l-1;u>=r-l;u--)i.push(at(e,h-1,u))}if(p%2){if(p==r)for(s=h++;s<f;s++)i.push(at(e,s,h-1));if(p==n)for(o=h++;o<l;o++)i.push(at(e,n-h,o))}break;case"spiralMarginToCenterCCW":f=n;l=r;h=0;p=r<n?r:n;a=Math.floor(p/2);for(c=0;c<a;c++){for(o=h++;o<l;o++)i.push(at(e,h-1,o));l--;for(s=h;s<f;s++)i.push(at(e,s,r-h));f--;for(t=l;t>=r-l;t--)i.push(at(e,f,t-1));for(u=f-1;u>=n-f;u--)i.push(at(e,u,h-1))}if(p%2){if(p==r)for(s=h++;s<f;s++)i.push(at(e,s,r-h));if(p==n)for(o=h++;o<l;o++)i.push(at(e,h-1,o))}break;case"spiralCenterToMarginCCW":f=n;l=r;h=0;p=r<n?r:n;a=Math.floor(p/2);for(c=0;c<a;c++){for(s=h++;s<f;s++)i.push(at(e,s,h-1));f--;for(o=h;o<l;o++)i.push(at(e,n-h,o));l--;for(t=f;t>=n-f;t--)i.push(at(e,t-1,l));for(u=l-1;u>=r-l;u--)i.push(at(e,h-1,u))}if(p%2){if(p==r)for(s=h++;s<f;s++)i.push(at(e,s,h-1));if(p==n)for(o=h++;o<l;o++)i.push(at(e,n-h,o))}i.reverse();break;case"spiralCenterToMarginCW":f=n;l=r;h=0;p=r<n?r:n;a=Math.floor(p/2);for(c=0;c<a;c++){for(o=h++;o<l;o++)i.push(at(e,h-1,o));l--;for(s=h;s<f;s++)i.push(at(e,s,r-h));f--;for(t=l;t>=r-l;t--)i.push(at(e,f,t-1));for(u=f-1;u>=n-f;u--)i.push(at(e,u,h-1))}if(p%2){if(p==r)for(s=h++;s<f;s++)i.push(at(e,s,r-h));if(p==n)for(o=h++;o<l;o++)i.push(at(e,h-1,o))}i.reverse();break;default:for(n=[];e.length;){u=Math.floor(Math.random()*e.length);n.push(e[u]);e.splice(u,1)}a=n.length;for(t=0;t<a;t++)i[t]=n[t]}return i}function at(t,n,r){return e.grep(t,function(e){return e.data("hPos")==n&&e.data("vPos")==r})[0]}function ft(e){return e[Math.floor(Math.random()*e.length)]}function lt(e){var t=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16);e=parseInt(e.substring(5,7),16);return{red:t,green:n,blue:e}}this.settings=e.extend({},e.fn.advancedSlider.defaults,n);var ct=e(t),ht=this,pt=-1,dt=-1,vt=-1,mt=[],gt=[],yt=0,bt=0,wt=null,Et=false,St=false,xt=false,Tt=false,Nt=false,Ct=false,kt=false,Lt=0,At=0,Ot,Mt=0,_t=0,Dt=0,Pt=0,Ht=0,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t=0,Jt=0,Kt=0,Qt,Gt,Yt=false,Zt,en=false,tn=false,nn,rn,sn=0,on=0,un,an=0,fn=false,ln=false,cn=true,hn="",pn=0,dn=null,vn,mn,gn,yn,bn,wn=0,En,Sn,xn=e.browser.msie&&parseInt(e.browser.version)<9,Tn=navigator.userAgent.match(/iPad/i)!=null||navigator.userAgent.match(/iPod/i)!=null||navigator.userAgent.match(/iPhone/i)!=null,Nn=false,Cn="off",kn=["alignType","effectType","sliceEffectType","sliceDelay","sliceDuration","sliceEasing","horizontalSlices","verticalSlices","slicePattern","slicePoint","sliceStartPosition","sliceStartRatio","sliceFade","captionSize","captionPosition","captionShowEffectDuration","captionShowEffectEasing","captionHideEffectDuration","captionHideEffectEasing","captionShowEffect","captionHideEffect","captionLeft","captionTop","captionWidth","captionHeight","captionShowSlideDirection","captionHideSlideDirection","captionBackgroundColor","captionBackgroundOpacity","slideshowDelay","slideMask","slideDirection","slideDuration","slideEasing","slideLoop","fadeInDuration","fadeOutDuration","fadeInEasing","fadeOutEasing","fadePreviousSlide","fadePreviousSlideDuration","thumbnailType","captionDelay","htmlDuringTransition"];(function(){if(ht.settings.xmlSource){ct.empty();e.ajax({type:"GET",url:ht.settings.xmlSource,dataType:e.browser.msie?"text":"xml",success:function(t){var s,o;if(e.browser.msie){s=new ActiveXObject("Microsoft.XMLDOM");s.async=false;s.loadXML(t)}else s=t;gn=e('<ul class="slides"></ul>').appendTo(ct);o=e(s).find("slider");e(s).find("slide").each(function(t){var r=e('<li class="slide"></li>').appendTo(gn),s=e(this),u=s.find("image"),a=s.find("thumbnail"),f=s.find("caption"),l=s.find("html"),c=s.find("link"),h=s.find("thumbnailLink"),p=u.length||s.attr("data-image"),d,v;s.attr("data-image")&&r.attr("data-image",s.attr("data-image"));if(p&&c.length)d=e("<a></a>").attr("href",c.text()).attr("title",c.attr("title")?c.attr("title"):"").attr("target",c.attr("target")?c.attr("target"):"_self").attr("rel",(c.attr("type")=="slider-lightbox"?c.attr("type"):"")+(c.attr("group")?"["+c.attr("group")+"]":"")).appendTo(r);if(u.length)e("<img/>").attr("src",u.text()).attr("class","image").attr("alt",u.attr("alt")?u.attr("alt"):"").attr("title",u.attr("title")?u.attr("title"):"").appendTo(d?d:r);if(a.length&&h.length)v=e("<a></a>").attr("href",h.text()).attr("title",h.attr("title")?h.attr("title"):"").attr("target",h.attr("target")?h.attr("target"):"_self").attr("rel",(h.attr("type")=="slider-lightbox"?h.attr("type"):"")+(h.attr("group")?"["+h.attr("group")+"]":"")).appendTo(r);if(a.length)e("<img/>").attr("src",a.text()).attr("class","thumbnail").attr("alt",a.attr("alt")?a.attr("alt"):"").attr("title",a.attr("title")?a.attr("title"):"").appendTo(v?v:r);if(f.length)e("<div></div>").html(f.text()).attr("class","caption").appendTo(f.attr("parent")=="link"&&d?d:r);l.length&&e("<div></div>").html(l.text()).attr("class","html").appendTo(r);r.properties={};for(s=0;s<kn.length;s++){u=kn[s];r.properties[u]=n.slideProperties&&n.slideProperties[t]&&n.slideProperties[t][u]?n.slideProperties[t][u]:e(this).attr(u)?e(this).attr(u):n[u]?n[u]:o.attr(u)?o.attr(u):e.fn.advancedSlider.defaults[u]}mt.push(r)});r();t={type:"xmlLoaded",data:s};e.isFunction(ht.settings.xmlLoaded)&&ht.settings.xmlLoaded.call(this,t)}})}else r()})();this.nextSlide=b;this.previousSlide=w;this.gotoSlide=y;this.startSlideshow=H;this.stopSlideshow=B;this.pauseSlideshow=F;this.resumeSlideshow=I;this.scrollToThumbnailPage=J;this.scrollToNextThumbnailPage=V;this.scrollToPreviousThumbnailPage=$;this.startThumbnailMouseScroll=G;this.stopThumbnailMouseScroll=function(){ht.settings.thumbnailMouseScroll=false;clearInterval(Qt)};this.startThumbnailMouseWheel=Y;this.stopThumbnailMouseWheel=function(){Yt=ht.settings.thumbnailMouseWheel=false;clearInterval(Gt)};this.startAutoToggle=K;this.stopAutoToggle=Q;this.doSliderLayout=o;this.getSlideshowState=function(){return Ot};this.getCurrentIndex=function(){return pt};this.getSlideAt=function(e){return mt[e]};this.getTriggerType=function(){return hn};this.isTransition=function(){return Et};this.totalSlides=function(){return yt};this.getSize=function(){return{sliderWidth:ct.width(),sliderHeight:ct.height(),slideWidth:mn.width(),slideHeight:mn.height()}};this.destroy=function(){B();tt();e(document).unbind("mousemove");e(document).unbind("mousemove.tooltip")}}e.fn.advancedSlider=function(e){for(var n=[],r=0;r<this.length;r++){if(!this[r].advancedslider)this[r].advancedslider=new t(this[r],e);n.push(this[r].advancedslider)}return n.length>1?n:n[0]};e.fn.advancedSlider.defaults={xmlSource:null,width:500,height:500,aspectRatio:-1,skin:"pixel",scrollbarSkin:"scrollbar-1",shadow:true,alignType:"centerCenter",scaleType:"outsideFit",allowScaleUp:false,preloadNearbyImages:false,slideStart:0,shuffle:false,slideshow:true,slideshowDelay:5e3,slideshowDirection:"next",slideshowLoop:true,slideshowControls:false,slideshowControlsToggle:true,slideshowControlsShowDuration:500,slideshowControlsHideDuration:500,pauseSlideshowOnHover:false,slideArrows:true,slideArrowsToggle:true,slideArrowsShowDuration:500,slideArrowsHideDuration:500,slideButtons:true,slideButtonsNumber:false,slideButtonsToggle:false,slideButtonsShowDuration:500,slideButtonsHideDuration:500,slideButtonsCenter:true,slideButtonsContainerCenter:true,keyboardNavigation:false,keyboardNavigationOnFocusOnly:false,autoToggle:false,autoToggleDelay:5e3,timerAnimation:true,timerAnimationControls:true,timerFadeDuration:500,timerToggle:false,timerRadius:18,timerStrokeColor1:"#000000",timerStrokeColor2:"#FFFFFF",timerStrokeOpacity1:.5,timerStrokeOpacity2:.7,timerStrokeWidth1:8,timerStrokeWidth2:4,lightbox:false,lightboxTheme:"pp_default",lightboxOpacity:.8,lightboxIcon:true,lightboxIconToggle:false,lightboxIconFadeDuration:500,thumbnailLightboxIcon:true,thumbnailLightboxIconToggle:true,fullscreenControls:false,fullscreenControlsToggle:true,fullscreenControlsShowDuration:500,fullscreenControlsHideDuration:500,fullscreenThumbnailScrollerOverlay:true,fullscreenSlideButtons:false,fullscreenShadow:false,htmlDuringTransition:true,overrideTransition:false,initialEffect:true,effectType:"random",sliceEffectType:"random",sliceDelay:50,sliceDuration:1e3,sliceEasing:"swing",horizontalSlices:5,verticalSlices:3,slicePattern:"random",slicePoint:"centerCenter",sliceStartPosition:"left",sliceStartRatio:1,slideMask:false,sliceFade:true,fadePreviousSlide:false,fadePreviousSlideDuration:300,slideDirection:"autoHorizontal",slideLoop:false,slideDuration:700,slideEasing:"swing",fadeInDuration:700,fadeOutDuration:700,fadeInEasing:"swing",fadeOutEasing:"swing",swipeOrientation:"horizontal",swipeDuration:700,swipeBackDuration:300,swipeSlideDistance:10,swipeEasing:"swing",swipeMouseDrag:true,swipeTouchDrag:true,swipeGrabCursor:true,swipeThreshold:50,thumbnailType:"tooltip",thumbnailWidth:80,thumbnailHeight:50,thumbnailSlideAmount:10,thumbnailSlideDuration:300,thumbnailSlideEasing:"swing",thumbnailScrollerToggle:false,thumbnailScrollerResponsive:false,thumbnailScrollerCenter:true,thumbnailScrollerOverlay:false,thumbnailScrollDuration:1e3,thumbnailScrollEasing:"swing",maximumVisibleThumbnails:5,minimumVisibleThumbnails:1,thumbnailOrientation:"horizontal",thumbnailLayers:1,thumbnailTooltip:false,tooltipShowDuration:300,tooltipHideDuration:300,thumbnailCaptionPosition:"bottom",thumbnailCaptionToggle:true,thumbnailCaptionEffect:"slide",thumbnailCaptionShowDuration:500,thumbnailCaptionHideDuration:500,thumbnailCaptionEasing:"swing",thumbnailScrollbar:false,thumbnailButtons:false,thumbnailArrows:true,thumbnailButtonsToggle:false,thumbnailArrowsToggle:false,thumbnailScrollbarToggle:false,scrollbarArrowScrollAmount:100,thumbnailScrollerHideDuration:500,thumbnailScrollerShowDuration:500,thumbnailArrowsHideDuration:500,thumbnailArrowsShowDuration:500,thumbnailButtonsHideDuration:500,thumbnailButtonsShowDuration:500,thumbnailScrollbarHideDuration:500,thumbnailScrollbarShowDuration:500,thumbnailSync:true,thumbnailMouseScroll:false,thumbnailMouseScrollEase:90,thumbnailMouseScrollSpeed:10,thumbnailMouseWheel:false,thumbnailMouseWheelSpeed:20,thumbnailMouseWheelReverse:false,thumbnailScrollbarEase:10,captionToggle:false,captionDelay:0,captionSize:70,captionBackgroundOpacity:.5,captionBackgroundColor:"#000000",captionShowEffect:"slide",captionShowEffectDuration:500,captionShowEffectEasing:"swing",captionShowSlideDirection:"auto",captionHideEffect:"fade",captionHideEffectDuration:300,captionHideEffectEasing:"swing",captionHideSlideDirection:"auto",captionPosition:"bottom",captionLeft:50,captionTop:50,captionWidth:300,captionHeight:100,videoPlayAction:"stopSlideshow",videoPauseAction:"none",videoEndAction:"startSlideshow",reachVideoAction:"none",leaveVideoAction:"pauseVideo",jwPlayerPath:"js/jw-player/player.swf",slideProperties:null,slideOpen:null,slideClick:null,slideMouseOver:null,slideMouseOut:null,thumbnailClick:null,thumbnailMouseOver:null,thumbnailMouseOut:null,transitionStart:null,transitionComplete:null,videoPlay:null,videoPause:null,videoEnd:null,videoFullscreenChange:null,xmlLoaded:null,doSliderLayout:null}})(jQuery)